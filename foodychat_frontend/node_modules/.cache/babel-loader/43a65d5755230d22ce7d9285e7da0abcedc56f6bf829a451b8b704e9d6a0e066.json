{"ast":null,"code":"import React,{useEffect}from'react';import'./css/kakaomap.css';import{jsx as _jsx}from\"react/jsx-runtime\";export default function KakaoMap(_ref){let{stores}=_ref;console.log(\"üì¶ Ï†ÑÎã¨Îêú stores:\",stores);stores.forEach(store=>console.log(\"üìç Ï£ºÏÜå ÌôïÏù∏:\",store.real_address));useEffect(()=>{const loadKakaoMapScript=()=>{if(window.kakao&&window.kakao.maps){console.log(\"‚úÖ Ïù¥ÎØ∏ kakao Í∞ùÏ≤¥ ÏûàÏùå\");window.kakao.maps.load(initMap);return;}const script=document.createElement(\"script\");script.src=\"//dapi.kakao.com/v2/maps/sdk.js?appkey=cdcb36f7c5dbf63f04c19c92959118ca&autoload=false&libraries=services\";script.async=true;script.onload=()=>{console.log(\"‚úÖ Kakao SDK Ïä§ÌÅ¨Î¶ΩÌä∏ Î°úÎî© ÏôÑÎ£å\");window.kakao.maps.load(()=>{console.log(\"‚úÖ kakao.maps.load ÏôÑÎ£åÎê®\",window.kakao);initMap();});};script.onerror=()=>{console.error(\"‚ùå Kakao SDK Î°úÎî© Ïã§Ìå® - ÌÇ§ ÎòêÎäî ÎèÑÎ©îÏù∏ ÌôïÏù∏ ÌïÑÏöî\");};document.head.appendChild(script);};const initMap=()=>{if(!stores||stores.length===0)return;const filteredStores=stores.filter(store=>!!store.real_address&&store.real_address.trim().length>1);if(filteredStores.length===0)return;const container=document.getElementById(\"map\");const geocoder=new window.kakao.maps.services.Geocoder();const bounds=new window.kakao.maps.LatLngBounds();// Ï≤´ Í∞ÄÍ≤å Ï£ºÏÜåÎ•º Í∏∞Ï§ÄÏúºÎ°ú Ï§ëÏã¨ Ï¢åÌëú ÏÑ§Ï†ï\ngeocoder.addressSearch(filteredStores[0].real_address,(result,status)=>{let centerCoords=new window.kakao.maps.LatLng(37.5665,126.9780);// fallback (ÏÑúÏö∏ ÏãúÏ≤≠)\nif(status===window.kakao.maps.services.Status.OK){centerCoords=new window.kakao.maps.LatLng(result[0].y,result[0].x);}const map=new window.kakao.maps.Map(container,{center:centerCoords,level:5});let markerCount=0;filteredStores.forEach(store=>{geocoder.addressSearch(store.real_address,(result,status)=>{console.log(`üìç Ï£ºÏÜå Í≤ÄÏÉâ Í≤∞Í≥º [${store.name}]`,store.real_address,status,result);if(status===window.kakao.maps.services.Status.OK){const coords=new window.kakao.maps.LatLng(result[0].y,result[0].x);bounds.extend(coords);const marker=new window.kakao.maps.Marker({map,position:coords});const info=new window.kakao.maps.InfoWindow({content:`\n                  <div style=\"padding:10px;font-size:14px;line-height:1.6;max-width:200px;word-break:break-word;\">\n                    <div style=\"font-weight:bold;font-size:15px;\">üìç ${store.name}</div>\n                    <div style=\"margin-top:4px;color:#444;\">\n                      ‚≠ê ${store.rating||\"0.0\"}Ï†ê ¬∑ ${store.review||\"Î¶¨Î∑∞ ÏóÜÏùå\"}\n                    </div>\n                    <a href=\"${store.url}\" target=\"_blank\"\n                       style=\"display:inline-block;margin-top:6px;color:#2b6cb0;font-weight:bold;text-decoration:none;\">\n                      üîó ÏûêÏÑ∏Ìûà Î≥¥Í∏∞\n                    </a>\n                  </div>\n                `});marker.setMap(map);window.kakao.maps.event.addListener(marker,\"click\",()=>{info.open(map,marker);});markerCount++;if(markerCount===filteredStores.length){map.setBounds(bounds);// Î™®Îì† ÎßàÏª§ Î≤îÏúÑ ÎßûÏ∂§\n}}});});});};loadKakaoMapScript();},[stores]);return/*#__PURE__*/_jsx(\"div\",{id:\"map\",style:{width:\"100%\",height:\"400px\",marginTop:\"20px\"}});}","map":{"version":3,"names":["React","useEffect","jsx","_jsx","KakaoMap","_ref","stores","console","log","forEach","store","real_address","loadKakaoMapScript","window","kakao","maps","load","initMap","script","document","createElement","src","async","onload","onerror","error","head","appendChild","length","filteredStores","filter","trim","container","getElementById","geocoder","services","Geocoder","bounds","LatLngBounds","addressSearch","result","status","centerCoords","LatLng","Status","OK","y","x","map","Map","center","level","markerCount","name","coords","extend","marker","Marker","position","info","InfoWindow","content","rating","review","url","setMap","event","addListener","open","setBounds","id","style","width","height","marginTop"],"sources":["C:/Python310/aiproject/FoodyChat/foodychat_frontend/src/components/KakaoMap.js"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport './css/kakaomap.css';\r\n\r\nexport default function KakaoMap({ stores }) {\r\n  console.log(\"üì¶ Ï†ÑÎã¨Îêú stores:\", stores);\r\n  stores.forEach(store => console.log(\"üìç Ï£ºÏÜå ÌôïÏù∏:\", store.real_address));\r\n\r\n  useEffect(() => {\r\n    const loadKakaoMapScript = () => {\r\n      if (window.kakao && window.kakao.maps) {\r\n        console.log(\"‚úÖ Ïù¥ÎØ∏ kakao Í∞ùÏ≤¥ ÏûàÏùå\");\r\n        window.kakao.maps.load(initMap);\r\n        return;\r\n      }\r\n\r\n      const script = document.createElement(\"script\");\r\n      script.src =\r\n        \"//dapi.kakao.com/v2/maps/sdk.js?appkey=cdcb36f7c5dbf63f04c19c92959118ca&autoload=false&libraries=services\";\r\n      script.async = true;\r\n\r\n      script.onload = () => {\r\n        console.log(\"‚úÖ Kakao SDK Ïä§ÌÅ¨Î¶ΩÌä∏ Î°úÎî© ÏôÑÎ£å\");\r\n        window.kakao.maps.load(() => {\r\n          console.log(\"‚úÖ kakao.maps.load ÏôÑÎ£åÎê®\", window.kakao);\r\n          initMap();\r\n        });\r\n      };\r\n\r\n      script.onerror = () => {\r\n        console.error(\"‚ùå Kakao SDK Î°úÎî© Ïã§Ìå® - ÌÇ§ ÎòêÎäî ÎèÑÎ©îÏù∏ ÌôïÏù∏ ÌïÑÏöî\");\r\n      };\r\n\r\n      document.head.appendChild(script);\r\n    };\r\n\r\n    const initMap = () => {\r\n      if (!stores || stores.length === 0) return;\r\n\r\n      const filteredStores = stores.filter(\r\n        (store) => !!store.real_address && store.real_address.trim().length > 1\r\n      );\r\n      if (filteredStores.length === 0) return;\r\n\r\n      const container = document.getElementById(\"map\");\r\n      const geocoder = new window.kakao.maps.services.Geocoder();\r\n      const bounds = new window.kakao.maps.LatLngBounds();\r\n\r\n      // Ï≤´ Í∞ÄÍ≤å Ï£ºÏÜåÎ•º Í∏∞Ï§ÄÏúºÎ°ú Ï§ëÏã¨ Ï¢åÌëú ÏÑ§Ï†ï\r\n      geocoder.addressSearch(filteredStores[0].real_address, (result, status) => {\r\n        let centerCoords = new window.kakao.maps.LatLng(37.5665, 126.9780); // fallback (ÏÑúÏö∏ ÏãúÏ≤≠)\r\n\r\n        if (status === window.kakao.maps.services.Status.OK) {\r\n          centerCoords = new window.kakao.maps.LatLng(result[0].y, result[0].x);\r\n        }\r\n\r\n        const map = new window.kakao.maps.Map(container, {\r\n          center: centerCoords,\r\n          level: 5,\r\n        });\r\n\r\n        let markerCount = 0;\r\n\r\n        filteredStores.forEach((store) => {\r\n          geocoder.addressSearch(store.real_address, (result, status) => {\r\n            console.log(`üìç Ï£ºÏÜå Í≤ÄÏÉâ Í≤∞Í≥º [${store.name}]`, store.real_address, status, result);\r\n\r\n            if (status === window.kakao.maps.services.Status.OK) {\r\n              const coords = new window.kakao.maps.LatLng(result[0].y, result[0].x);\r\n              bounds.extend(coords);\r\n\r\n              const marker = new window.kakao.maps.Marker({\r\n                map,\r\n                position: coords,\r\n              });\r\n\r\n              const info = new window.kakao.maps.InfoWindow({\r\n                content: `\r\n                  <div style=\"padding:10px;font-size:14px;line-height:1.6;max-width:200px;word-break:break-word;\">\r\n                    <div style=\"font-weight:bold;font-size:15px;\">üìç ${store.name}</div>\r\n                    <div style=\"margin-top:4px;color:#444;\">\r\n                      ‚≠ê ${store.rating || \"0.0\"}Ï†ê ¬∑ ${store.review || \"Î¶¨Î∑∞ ÏóÜÏùå\"}\r\n                    </div>\r\n                    <a href=\"${store.url}\" target=\"_blank\"\r\n                       style=\"display:inline-block;margin-top:6px;color:#2b6cb0;font-weight:bold;text-decoration:none;\">\r\n                      üîó ÏûêÏÑ∏Ìûà Î≥¥Í∏∞\r\n                    </a>\r\n                  </div>\r\n                `,\r\n              });\r\n\r\n              marker.setMap(map);\r\n              window.kakao.maps.event.addListener(marker, \"click\", () => {\r\n                info.open(map, marker);\r\n              });\r\n\r\n              markerCount++;\r\n              if (markerCount === filteredStores.length) {\r\n                map.setBounds(bounds); // Î™®Îì† ÎßàÏª§ Î≤îÏúÑ ÎßûÏ∂§\r\n              }\r\n            }\r\n          });\r\n        });\r\n      });\r\n    };\r\n\r\n    loadKakaoMapScript();\r\n  }, [stores]);\r\n\r\n  return (\r\n    <div\r\n      id=\"map\"\r\n      style={{ width: \"100%\", height: \"400px\", marginTop: \"20px\" }}\r\n    />\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}