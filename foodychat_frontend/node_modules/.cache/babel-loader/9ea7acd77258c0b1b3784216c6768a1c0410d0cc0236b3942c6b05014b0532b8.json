{"ast":null,"code":"import React,{useState}from'react';import{Link,useNavigate}from'react-router-dom';import axios from'axios';import NavBar from'./NavBar';import{GoogleLogin}from'@react-oauth/google';import'./css/signup.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function Signup(){const[form,setForm]=useState({user_name:'',email:'',user_password:'',confirmPassword:'',phone:''});const[error,setError]=useState('');const[success,setSuccess]=useState('');const navigate=useNavigate();const handleChange=e=>{const{name,value}=e.target;setForm(prev=>({...prev,[name]:value}));};const handleSubmit=async e=>{e.preventDefault();setError('');setSuccess('');if(form.user_password!==form.confirmPassword){setError('비밀번호가 일치하지 않습니다.');return;}try{const response=await axios.post('http://localhost:8080/users/signup',{user_name:form.user_name,email:form.email,user_password:form.user_password,phone:form.phone},{headers:{'Content-Type':'application/json'}});if(response.status===200||response.status===201){const userId=response.data.user_id;console.error(userId);if(!userId){setError('서버로부터 사용자 ID를 받지 못했습니다.');return;}localStorage.setItem(\"user_id\",userId);setSuccess('회원가입이 완료되었습니다!');setTimeout(()=>{navigate('/user-details');},1000);}}catch(err){var _err$response,_err$response$data;console.error(err);setError('회원가입 실패: '+(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||'알 수 없는 오류'));}};const handleGoogleSignup=async credentialResponse=>{try{const res=await axios.post('http://localhost:8080/users/google',{token:credentialResponse.credential});const userId=res.data.user_id;if(!userId){alert(\"서버로부터 사용자 ID를 받지 못했습니다.\");return;}localStorage.setItem(\"user_id\",userId);alert(\"구글 회원가입 성공!\");navigate('/user-details');}catch(err){console.error(err);alert(\"구글 회원가입 실패\");}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(NavBar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Welcome to foodyChat!\"})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"\\uC774\\uB984*\",name:\"user_name\",value:form.user_name,onChange:handleChange,required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",placeholder:\"\\uC774\\uBA54\\uC77C*\",name:\"email\",value:form.email,onChange:handleChange,required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",placeholder:\"\\uBE44\\uBC00\\uBC88\\uD638*\",name:\"user_password\",value:form.user_password,onChange:handleChange,required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",placeholder:\"\\uBE44\\uBC00\\uBC88\\uD638 \\uD655\\uC778*\",name:\"confirmPassword\",value:form.confirmPassword,onChange:handleChange,required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"tel\",className:\"form-control\",placeholder:\"\\uC804\\uD654\\uBC88\\uD638*\",name:\"phone\",value:form.phone,onChange:handleChange,required:true})}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),success&&/*#__PURE__*/_jsx(\"div\",{className:\"success-message\",children:success}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"\\uACC4\\uC18D\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"terms-text\",children:[\"\\uD68C\\uC6D0\\uAC00\\uC785 \\uC2DC \",/*#__PURE__*/_jsx(Link,{to:\"/terms\",children:\"\\uC774\\uC6A9\\uC57D\\uAD00\"}),\"\\uACFC \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Link,{to:\"/privacy\",children:\"\\uAC1C\\uC778\\uC815\\uBCF4 \\uBCF4\\uD638\\uC815\\uCC45\"}),\"\\uC5D0 \\uB3D9\\uC758\\uD558\\uB294 \\uAC83\\uC73C\\uB85C \\uAC04\\uC8FC\\uB429\\uB2C8\\uB2E4.\"]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(GoogleLogin,{onSuccess:handleGoogleSignup,onError:()=>alert(\"구글 로그인 실패\")})]})]})]});}","map":{"version":3,"names":["React","useState","Link","useNavigate","axios","NavBar","GoogleLogin","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Signup","form","setForm","user_name","email","user_password","confirmPassword","phone","error","setError","success","setSuccess","navigate","handleChange","e","name","value","target","prev","handleSubmit","preventDefault","response","post","headers","status","userId","data","user_id","console","localStorage","setItem","setTimeout","err","_err$response","_err$response$data","message","handleGoogleSignup","credentialResponse","res","token","credential","alert","children","className","onSubmit","type","placeholder","onChange","required","to","onSuccess","onError"],"sources":["D:/workspace/FoodyChat/foodychat_frontend/src/components/SignupForm.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport NavBar from './NavBar';\r\nimport { GoogleLogin } from '@react-oauth/google';\r\nimport './css/signup.css';\r\n\r\nexport default function Signup() {\r\n    const [form, setForm] = useState({\r\n        user_name: '',\r\n        email: '',\r\n        user_password: '',\r\n        confirmPassword: '',\r\n        phone: ''\r\n    });\r\n\r\n    const [error, setError] = useState('');\r\n    const [success, setSuccess] = useState('');\r\n    const navigate = useNavigate();\r\n\r\n    const handleChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setForm(prev => ({\r\n            ...prev,\r\n            [name]: value\r\n        }));\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        setError('');\r\n        setSuccess('');\r\n\r\n        if (form.user_password !== form.confirmPassword) {\r\n            setError('비밀번호가 일치하지 않습니다.');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const response = await axios.post(\r\n                'http://localhost:8080/users/signup',\r\n                {\r\n                    user_name: form.user_name,\r\n                    email: form.email,\r\n                    user_password: form.user_password,\r\n                    phone: form.phone\r\n                },\r\n                {\r\n                    headers: {\r\n                        'Content-Type': 'application/json',\r\n                    }\r\n                }\r\n            );\r\n\r\n            if (response.status === 200 || response.status === 201) {\r\n                const userId = response.data.user_id;\r\n                console.error(userId);\r\n                if (!userId) {\r\n                    setError('서버로부터 사용자 ID를 받지 못했습니다.');\r\n                    return;\r\n                }\r\n\r\n                localStorage.setItem(\"user_id\", userId);\r\n                setSuccess('회원가입이 완료되었습니다!');\r\n                setTimeout(() => {\r\n                    navigate('/user-details');\r\n                }, 1000);\r\n            }\r\n        } catch (err) {\r\n            console.error(err);\r\n            setError('회원가입 실패: ' + (err.response?.data?.message || '알 수 없는 오류'));\r\n        }\r\n    };\r\n\r\n    const handleGoogleSignup = async (credentialResponse) => {\r\n        try {\r\n            const res = await axios.post('http://localhost:8080/users/google', {\r\n                token: credentialResponse.credential,\r\n            });\r\n\r\n            const userId = res.data.user_id;\r\n\r\n            if (!userId) {\r\n                alert(\"서버로부터 사용자 ID를 받지 못했습니다.\");\r\n                return;\r\n            }\r\n\r\n            localStorage.setItem(\"user_id\", userId);\r\n            alert(\"구글 회원가입 성공!\");\r\n            navigate('/user-details');\r\n        } catch (err) {\r\n            console.error(err);\r\n            alert(\"구글 회원가입 실패\");\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <NavBar />        \r\n            <div className=\"container\">\r\n                <div className=\"text-center\">\r\n                    <h1>Welcome to foodyChat!</h1>\r\n                </div>\r\n                <form onSubmit={handleSubmit}>\r\n                    <div className=\"form-group\">\r\n                        <input\r\n                            type=\"text\"\r\n                            className=\"form-control\"\r\n                            placeholder=\"이름*\"\r\n                            name=\"user_name\"\r\n                            value={form.user_name}\r\n                            onChange={handleChange}\r\n                            required\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <input\r\n                            type=\"email\"\r\n                            className=\"form-control\"\r\n                            placeholder=\"이메일*\"\r\n                            name=\"email\"\r\n                            value={form.email}\r\n                            onChange={handleChange}\r\n                            required\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <input\r\n                            type=\"password\"\r\n                            className=\"form-control\"\r\n                            placeholder=\"비밀번호*\"\r\n                            name=\"user_password\"\r\n                            value={form.user_password}\r\n                            onChange={handleChange}\r\n                            required\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <input\r\n                            type=\"password\"\r\n                            className=\"form-control\"\r\n                            placeholder=\"비밀번호 확인*\"\r\n                            name=\"confirmPassword\"\r\n                            value={form.confirmPassword}\r\n                            onChange={handleChange}\r\n                            required\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <input\r\n                            type=\"tel\"\r\n                            className=\"form-control\"\r\n                            placeholder=\"전화번호*\"\r\n                            name=\"phone\"\r\n                            value={form.phone}\r\n                            onChange={handleChange}\r\n                            required\r\n                        />\r\n                    </div>\r\n\r\n                    {error && <div className=\"error-message\">{error}</div>}\r\n                    {success && <div className=\"success-message\">{success}</div>}\r\n\r\n                    <button type=\"submit\" className=\"btn btn-primary\">계속</button>\r\n\r\n                    <div className=\"terms-text\">\r\n                        회원가입 시 <Link to=\"/terms\">이용약관</Link>과 <br /><Link to=\"/privacy\">개인정보 보호정책</Link>에 동의하는 것으로 간주됩니다.\r\n                    </div>\r\n\r\n                    <hr />\r\n                    <GoogleLogin\r\n                        onSuccess={handleGoogleSignup}\r\n                        onError={() => alert(\"구글 로그인 실패\")}\r\n                    />\r\n                </form>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}