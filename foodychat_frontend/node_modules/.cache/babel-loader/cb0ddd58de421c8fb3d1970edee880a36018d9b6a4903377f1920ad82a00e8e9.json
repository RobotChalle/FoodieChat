{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useSearchParams,useNavigate}from'react-router-dom';import axios from'axios';import'./css/resetpassword.css';// 스타일은 별도 정의\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function ResetPassword(){const[searchParams]=useSearchParams();const token=searchParams.get('token');const navigate=useNavigate();const[password,setPassword]=useState('');const[confirmPassword,setConfirmPassword]=useState('');const[error,setError]=useState('');const[success,setSuccess]=useState('');useEffect(()=>{if(!token){setError('유효하지 않은 비밀번호 재설정 링크입니다.');}},[token]);const handleSubmit=async e=>{e.preventDefault();setError('');setSuccess('');if(password!==confirmPassword){setError('비밀번호가 일치하지 않습니다.');return;}try{await axios.post('http://localhost:8080/users/resetPassword',new URLSearchParams({token:token,newPassword:password}),{headers:{'Content-Type':'application/x-www-form-urlencoded'},withCredentials:true});setSuccess('비밀번호가 성공적으로 변경되었습니다. 로그인 화면으로 이동합니다.');setTimeout(()=>navigate('/login'),3000);}catch(err){setError(err.message,'비밀번호 재설정에 실패했습니다. 토큰이 만료되었거나 유효하지 않습니다.');console.error(err);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"reset-password-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uBE44\\uBC00\\uBC88\\uD638 \\uC7AC\\uC124\\uC815\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),success&&/*#__PURE__*/_jsx(\"div\",{className:\"success-message\",children:success}),!success&&/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",placeholder:\"\\uC0C8 \\uBE44\\uBC00\\uBC88\\uD638\",value:password,onChange:e=>setPassword(e.target.value),required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",placeholder:\"\\uBE44\\uBC00\\uBC88\\uD638 \\uD655\\uC778\",value:confirmPassword,onChange:e=>setConfirmPassword(e.target.value),required:true})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"\\uBE44\\uBC00\\uBC88\\uD638 \\uC7AC\\uC124\\uC815\"})]})]});}","map":{"version":3,"names":["React","useState","useEffect","useSearchParams","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","ResetPassword","searchParams","token","get","navigate","password","setPassword","confirmPassword","setConfirmPassword","error","setError","success","setSuccess","handleSubmit","e","preventDefault","post","URLSearchParams","newPassword","headers","withCredentials","setTimeout","err","message","console","className","children","onSubmit","type","placeholder","value","onChange","target","required"],"sources":["D:/workspace/FoodyChat/foodychat_frontend/src/components/ResetPassword.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useSearchParams, useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport './css/resetpassword.css'; // 스타일은 별도 정의\r\n\r\nexport default function ResetPassword() {\r\n    const [searchParams] = useSearchParams();\r\n    const token = searchParams.get('token');\r\n    const navigate = useNavigate();\r\n\r\n    const [password, setPassword] = useState('');\r\n    const [confirmPassword, setConfirmPassword] = useState('');\r\n    const [error, setError] = useState('');\r\n    const [success, setSuccess] = useState('');\r\n\r\n    useEffect(() => {\r\n        if (!token) {\r\n            setError('유효하지 않은 비밀번호 재설정 링크입니다.');\r\n        }\r\n    }, [token]);\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        setError('');\r\n        setSuccess('');\r\n\r\n        if (password !== confirmPassword) {\r\n            setError('비밀번호가 일치하지 않습니다.');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            await axios.post('http://localhost:8080/users/resetPassword', \r\n                new URLSearchParams({\r\n                    token: token,\r\n                    newPassword: password\r\n                }),\r\n                {\r\n                    headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\r\n                    withCredentials: true\r\n                }\r\n            );\r\n            setSuccess('비밀번호가 성공적으로 변경되었습니다. 로그인 화면으로 이동합니다.');\r\n            setTimeout(() => navigate('/login'), 3000);\r\n        } catch (err) {\r\n            setError(err.message,'비밀번호 재설정에 실패했습니다. 토큰이 만료되었거나 유효하지 않습니다.');\r\n            console.error(err);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"reset-password-container\">\r\n            <h2>비밀번호 재설정</h2>\r\n            {error && <div className=\"error-message\">{error}</div>}\r\n            {success && <div className=\"success-message\">{success}</div>}\r\n            {!success && (\r\n                <form onSubmit={handleSubmit}>\r\n                    <div className=\"form-group\">\r\n                        <input\r\n                            type=\"password\"\r\n                            className=\"form-control\"\r\n                            placeholder=\"새 비밀번호\"\r\n                            value={password}\r\n                            onChange={(e) => setPassword(e.target.value)}\r\n                            required\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <input\r\n                            type=\"password\"\r\n                            className=\"form-control\"\r\n                            placeholder=\"비밀번호 확인\"\r\n                            value={confirmPassword}\r\n                            onChange={(e) => setConfirmPassword(e.target.value)}\r\n                            required\r\n                        />\r\n                    </div>\r\n                    <button type=\"submit\" className=\"btn btn-primary\">비밀번호 재설정</button>\r\n                </form>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}