{"ast":null,"code":"var _jsxFileName = \"D:\\\\workspace\\\\FoodyChat\\\\foodychat_frontend\\\\src\\\\components\\\\CafeRecommend.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport NavBar from './NavBar';\nimport { toast } from 'react-toastify';\nimport './css/meal-recommend.css';\nimport './css/main.css';\nimport { useParams } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function MealRecommendation() {\n  _s();\n  const {\n    foodName\n  } = useParams();\n  // const getToday = () => {\n  //     const today = new Date();\n  //     return today.toISOString().split('T')[0];\n  // };\n\n  // const getEndOfMonth = () => {\n  // const date = new Date();\n  // const end = new Date(date.getFullYear(), date.getMonth() + 1, 1);\n  //     return end.toISOString().split('T')[0];\n  // };\n\n  // const [startDate, setStartDate] = useState(getToday());\n  // const [endDate, setEndDate] = useState(getEndOfMonth());\n  // const [mealTypes, setMealTypes] = useState([]);\n  const [recommendedStore, setRecommendedStore] = useState([]);\n  // const [loading, setLoading] = useState(false); // ✅ 로딩 상태 추가\n\n  // const handleCheckboxChange = (type) => {\n  //     if (type === 'all') {\n  //         const isAllSelected = mealTypes.includes('breakfast') && mealTypes.includes('lunch') && mealTypes.includes('dinner');\n  //         setMealTypes(isAllSelected ? [] : ['breakfast', 'lunch', 'dinner']);\n  //     } else {\n  //         setMealTypes((prev) =>\n  //             prev.includes(type) ? prev.filter((t) => t !== type) : [...prev, type]\n  //         );\n  //     }\n  // };\n\n  const handleRecommend = async () => {\n    try {\n      setLoading(true); // ✅ 로딩 시작\n      // 'all'은 제거하고 넘김\n      const filteredTypes = mealTypes.filter(type => type !== 'all');\n      const payload = new URLSearchParams({\n        start: startDate,\n        end: endDate,\n        types: filteredTypes.join(',')\n      });\n      const response = await axios.post('http://localhost:8080/analyze/recommend', payload, {\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        withCredentials: true\n      });\n      if (response.status === 200) {\n        toast.success('추천 완료!');\n      }\n      setRecommendedStore(response.data.result);\n    } catch (error) {\n      console.error('추천 실패:', error);\n    } finally {\n      setLoading(false); // ✅ 로딩 종료\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(NavBar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"recommend-wrapper\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"recommend-inner\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"title\",\n          children: [\"\\uD83D\\uDCC5 \", foodName, \" \\uB9DE\\uCDA4 \\uC2DD\\uB2F9 \\uCD94\\uCC9C\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleRecommend,\n          className: \"btn btn-primary\",\n          disabled: loading,\n          children: [loading ? '🍽 추천중...' : '🍱 추천 받기', \"  \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true);\n}\n_s(MealRecommendation, \"ojQFCKRgV72TmPcJGKFdRqFpuGQ=\", false, function () {\n  return [useParams];\n});\n_c = MealRecommendation;\nvar _c;\n$RefreshReg$(_c, \"MealRecommendation\");","map":{"version":3,"names":["React","useState","axios","NavBar","toast","useParams","jsxDEV","_jsxDEV","Fragment","_Fragment","MealRecommendation","_s","foodName","recommendedStore","setRecommendedStore","handleRecommend","setLoading","filteredTypes","mealTypes","filter","type","payload","URLSearchParams","start","startDate","end","endDate","types","join","response","post","headers","withCredentials","status","success","data","result","error","console","children","fileName","_jsxFileName","lineNumber","columnNumber","className","onClick","disabled","loading","_c","$RefreshReg$"],"sources":["D:/workspace/FoodyChat/foodychat_frontend/src/components/CafeRecommend.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport NavBar from './NavBar';\r\nimport { toast } from 'react-toastify';\r\nimport './css/meal-recommend.css';\r\nimport './css/main.css';\r\nimport { useParams } from 'react-router-dom';\r\n\r\n\r\nexport default function MealRecommendation() {\r\n    const { foodName } = useParams();\r\n    // const getToday = () => {\r\n    //     const today = new Date();\r\n    //     return today.toISOString().split('T')[0];\r\n    // };\r\n\r\n    // const getEndOfMonth = () => {\r\n    // const date = new Date();\r\n    // const end = new Date(date.getFullYear(), date.getMonth() + 1, 1);\r\n    //     return end.toISOString().split('T')[0];\r\n    // };\r\n\r\n    // const [startDate, setStartDate] = useState(getToday());\r\n    // const [endDate, setEndDate] = useState(getEndOfMonth());\r\n    // const [mealTypes, setMealTypes] = useState([]);\r\n    const [recommendedStore, setRecommendedStore] = useState([]);\r\n    // const [loading, setLoading] = useState(false); // ✅ 로딩 상태 추가\r\n\r\n    // const handleCheckboxChange = (type) => {\r\n    //     if (type === 'all') {\r\n    //         const isAllSelected = mealTypes.includes('breakfast') && mealTypes.includes('lunch') && mealTypes.includes('dinner');\r\n    //         setMealTypes(isAllSelected ? [] : ['breakfast', 'lunch', 'dinner']);\r\n    //     } else {\r\n    //         setMealTypes((prev) =>\r\n    //             prev.includes(type) ? prev.filter((t) => t !== type) : [...prev, type]\r\n    //         );\r\n    //     }\r\n    // };\r\n\r\n    const handleRecommend = async () => {\r\n        try {\r\n          setLoading(true); // ✅ 로딩 시작\r\n            // 'all'은 제거하고 넘김\r\n            const filteredTypes = mealTypes.filter((type) => type !== 'all');\r\n            const payload = new URLSearchParams({\r\n                start: startDate,\r\n                end: endDate,\r\n                types: filteredTypes.join(',')\r\n            });\r\n\r\n            const response = await axios.post('http://localhost:8080/analyze/recommend', payload, {\r\n                headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\r\n                withCredentials: true\r\n            });\r\n\r\n            if (response.status === 200) {\r\n                toast.success('추천 완료!');\r\n            }\r\n            setRecommendedStore(response.data.result);\r\n        } catch (error) {\r\n            console.error('추천 실패:', error);\r\n        } finally {\r\n          setLoading(false); // ✅ 로딩 종료\r\n      }\r\n    };\r\n\r\n\r\n  return (\r\n    <>\r\n    <NavBar />\r\n    <div className=\"recommend-wrapper\">\r\n      <div className=\"recommend-inner\">\r\n        <h2 className=\"title\">📅 {foodName} 맞춤 식당 추천</h2>\r\n        {/* <div className=\"form-row\">\r\n          <div className=\"form-group-inline meal-type-group\">\r\n            <label>식사 선택</label>\r\n            <label><input type=\"checkbox\" checked={mealTypes.includes('breakfast') && mealTypes.includes('lunch') && mealTypes.includes('dinner')} onChange={() => handleCheckboxChange('all')} /> 전체</label>\r\n            <label><input type=\"checkbox\" checked={mealTypes.includes('breakfast')} onChange={() => handleCheckboxChange('breakfast')} /> 조식</label>\r\n            <label><input type=\"checkbox\" checked={mealTypes.includes('lunch')} onChange={() => handleCheckboxChange('lunch')} /> 중식</label>\r\n            <label><input type=\"checkbox\" checked={mealTypes.includes('dinner')} onChange={() => handleCheckboxChange('dinner')} /> 석식</label>\r\n          </div> */}\r\n\r\n          <button onClick={handleRecommend} className=\"btn btn-primary\" disabled={loading}>\r\n              {loading ? '🍽 추천중...' : '🍱 추천 받기'}  {/* ✅ 텍스트 변경 */}\r\n          </button>\r\n        </div>\r\n\r\n        {/* {loading && (\r\n            <p style={{ marginTop: '10px', fontWeight: '500', color: '#555' }}>\r\n                추천 결과를 생성 중입니다. 잠시만 기다려주세요...\r\n            </p>\r\n        )} */}\r\n\r\n        {/* <div className=\"table-scroll-container\">\r\n          <table className=\"result-table\">\r\n            <thead>\r\n              <tr>\r\n                <th className=\"col-narrow\">날짜</th>\r\n                <th className=\"col-narrow\">식사구분</th>\r\n                <th className=\"col-wide\">추천메뉴</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {recommendedMeals.map((meal, index) => (\r\n                <tr key={index}>\r\n                  <td>{meal.date}</td>\r\n                  <td>{meal.type}</td>\r\n                  <td>{meal.menu}</td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div> */}\r\n      {/* </div> */}\r\n    </div>\r\n    </>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}